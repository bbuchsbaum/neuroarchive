% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/experimental_api.R
\name{basis_space_embed}
\alias{basis_space_embed}
\title{Embed data using spatial basis}
\usage{
basis_space_embed(
  data,
  mask,
  basis_params = list(),
  compression_ratio = NULL,
  return_basis = FALSE
)
}
\arguments{
\item{data}{Matrix with time in rows, voxels in columns}

\item{mask}{LogicalNeuroVol defining spatial structure}

\item{basis_params}{Parameters for HRBF basis generation (see \code{basis_space_centers})}

\item{compression_ratio}{Target compression ratio (alternative to specifying basis size)}

\item{return_basis}{Return the basis matrix for inspection (default: FALSE)}
}
\value{
List with embedded coefficients and metadata
}
\description{
Project data onto a spatial HRBF basis for dimensionality reduction
and spatial modeling. This creates a compressed representation
that preserves spatial structure.
}
\examples{
\donttest{
# Create example data and mask
library(neuroim2)
dims <- c(20, 20, 10)
arr <- array(TRUE, dims)
mask <- LogicalNeuroVol(arr, NeuroSpace(dims, spacing = c(2, 2, 2)))

# Create time series data (50 timepoints, 4000 voxels)
set.seed(123)
n_voxels <- sum(as.logical(mask))
my_data <- matrix(rnorm(50 * n_voxels), nrow = 50, ncol = n_voxels)

# Basic embedding with default parameters
embedded <- basis_space_embed(my_data, mask)

# High compression
compressed <- basis_space_embed(
  my_data, 
  mask, 
  compression_ratio = 0.1,  # 10:1 compression
  return_basis = TRUE
)

# Custom basis parameters
custom_embedded <- basis_space_embed(
  my_data,
  mask,
  basis_params = list(sigma0 = 4, levels = 4, kernel_type = "wendland_c4")
)
}

}
